<html><head><meta http-equiv="Content-Type" content="text/html;charset=utf-8">
<title>remote_robotics: Pololu.cpp Source File</title>
<link href="doxygen.css" rel="stylesheet" type="text/css">
<link href="tabs.css" rel="stylesheet" type="text/css">
<script type="text/javascript" src="jquery.js"></script>
</head>
<body onload='searchBox.OnSelectItem(0);'>
<!-- Generated by Doxygen 1.8.13 -->
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
$(function() {
  initMenu('',false,false,'search.php','Search');
});
</script>
<div id="main-nav"></div>
<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="dir_68267d1309a1af8e8297ef4c3efbcdba.html">src</a></li><li class="navelem"><a class="el" href="dir_f93f1e293c490d30b7c4b0f1372e5ecd.html">pololu</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="headertitle">
<div class="title">Pololu.cpp</div>  </div>
</div><!--header-->
<div class="contents">
<a href="Pololu_8cpp.html">Go to the documentation of this file.</a><div class="fragment"><div class="line"><a name="l00001"></a><span class="lineno">    1</span>&#160;<span class="comment">//============================================================================</span></div><div class="line"><a name="l00002"></a><span class="lineno">    2</span>&#160;<span class="comment">// Name        : Pololu.cpp</span></div><div class="line"><a name="l00003"></a><span class="lineno">    3</span>&#160;<span class="comment">// Author      : Willi Penner, Martin Huelse (martin.huelse@fh-bielefeld.de</span></div><div class="line"><a name="l00004"></a><span class="lineno">    4</span>&#160;<span class="comment">//</span></div><div class="line"><a name="l00005"></a><span class="lineno">    5</span>&#160;<span class="comment">// Description : Pololu source file. It contains the definition of the</span></div><div class="line"><a name="l00006"></a><span class="lineno">    6</span>&#160;<span class="comment">//               functions of the Pololu class.</span></div><div class="line"><a name="l00007"></a><span class="lineno">    7</span>&#160;<span class="comment">//============================================================================</span></div><div class="line"><a name="l00008"></a><span class="lineno">    8</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="Pololu_8hpp.html">pololu/Pololu.hpp</a>&quot;</span></div><div class="line"><a name="l00009"></a><span class="lineno">    9</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="SerialCom_8hpp.html">pololu/SerialCom.hpp</a>&quot;</span></div><div class="line"><a name="l00010"></a><span class="lineno">   10</span>&#160;<span class="preprocessor">#include &lt;string&gt;</span></div><div class="line"><a name="l00011"></a><span class="lineno">   11</span>&#160;<span class="preprocessor">#include &lt;iostream&gt;</span></div><div class="line"><a name="l00012"></a><span class="lineno">   12</span>&#160;</div><div class="line"><a name="l00013"></a><span class="lineno"><a class="line" href="classPololu.html#aecab2bbf1b8154480e3ee890ab7c158c">   13</a></span>&#160;<a class="code" href="classPololu.html#aecab2bbf1b8154480e3ee890ab7c158c">Pololu::Pololu</a>(){</div><div class="line"><a name="l00014"></a><span class="lineno">   14</span>&#160;        <span class="keywordflow">throw</span> <span class="keyword">new</span> <a class="code" href="classExceptionPololu.html">ExceptionPololu</a>(<span class="keywordtype">string</span>(<span class="stringliteral">&quot;This unparameterized constructor shall not be called.&quot;</span>));</div><div class="line"><a name="l00015"></a><span class="lineno">   15</span>&#160;}</div><div class="line"><a name="l00016"></a><span class="lineno">   16</span>&#160;</div><div class="line"><a name="l00017"></a><span class="lineno">   17</span>&#160;</div><div class="line"><a name="l00018"></a><span class="lineno"><a class="line" href="classPololu.html#a9712aa40998c72d73dcbb925be65e656">   18</a></span>&#160;<a class="code" href="classPololu.html#aecab2bbf1b8154480e3ee890ab7c158c">Pololu::Pololu</a>(<span class="keyword">const</span> <span class="keywordtype">char</span>* portName, <span class="keywordtype">unsigned</span> <span class="keywordtype">short</span> baudRate){</div><div class="line"><a name="l00019"></a><span class="lineno">   19</span>&#160;        <span class="keywordflow">try</span>{</div><div class="line"><a name="l00020"></a><span class="lineno">   20</span>&#160;                <a class="code" href="classPololu.html#aeb681b4f2f39a1bf9e2df0155d9f44db">isComPortOpen_</a> = <span class="keyword">false</span>;</div><div class="line"><a name="l00021"></a><span class="lineno">   21</span>&#160;                <a class="code" href="classPololu.html#a7cce7354fa89281c29c5c3a453207243">serialCom_</a> = <span class="keyword">new</span> <a class="code" href="classSerialCom.html">SerialCom</a>(portName, baudRate);</div><div class="line"><a name="l00022"></a><span class="lineno">   22</span>&#160;                <span class="keywordflow">if</span>(<a class="code" href="classPololu.html#a7cce7354fa89281c29c5c3a453207243">serialCom_</a> == <span class="keyword">nullptr</span>){</div><div class="line"><a name="l00023"></a><span class="lineno">   23</span>&#160;                        <span class="keywordtype">string</span> msg(<span class="stringliteral">&quot;Pololu(Contructor)::Could not create a SerialCom instance.&quot;</span>);</div><div class="line"><a name="l00024"></a><span class="lineno">   24</span>&#160;                        <span class="keywordflow">throw</span> <span class="keyword">new</span> <a class="code" href="classExceptionPololu.html">ExceptionPololu</a>(msg);</div><div class="line"><a name="l00025"></a><span class="lineno">   25</span>&#160;                }</div><div class="line"><a name="l00026"></a><span class="lineno">   26</span>&#160;        }<span class="keywordflow">catch</span>(<a class="code" href="classIException.html">IException</a> *e){</div><div class="line"><a name="l00027"></a><span class="lineno">   27</span>&#160;                <span class="keywordflow">throw</span> e;</div><div class="line"><a name="l00028"></a><span class="lineno">   28</span>&#160;        }<span class="keywordflow">catch</span>(...){</div><div class="line"><a name="l00029"></a><span class="lineno">   29</span>&#160;                <span class="keywordtype">string</span> msg(<span class="stringliteral">&quot;Pololu(Contructor)::Unknown error while creating a SerialCom instance.&quot;</span>);</div><div class="line"><a name="l00030"></a><span class="lineno">   30</span>&#160;                <span class="keywordflow">throw</span> <span class="keyword">new</span> <a class="code" href="classExceptionPololu.html">ExceptionPololu</a>(msg);</div><div class="line"><a name="l00031"></a><span class="lineno">   31</span>&#160;        }</div><div class="line"><a name="l00032"></a><span class="lineno">   32</span>&#160;}</div><div class="line"><a name="l00033"></a><span class="lineno">   33</span>&#160;</div><div class="line"><a name="l00034"></a><span class="lineno">   34</span>&#160;</div><div class="line"><a name="l00035"></a><span class="lineno"><a class="line" href="classPololu.html#a97e9fe7c507acfaedbb640e3682cec6d">   35</a></span>&#160;<a class="code" href="classPololu.html#a97e9fe7c507acfaedbb640e3682cec6d">Pololu::~Pololu</a>(){</div><div class="line"><a name="l00036"></a><span class="lineno">   36</span>&#160;        <span class="keywordflow">if</span>(<a class="code" href="classPololu.html#a7cce7354fa89281c29c5c3a453207243">serialCom_</a> != <span class="keyword">nullptr</span>){</div><div class="line"><a name="l00037"></a><span class="lineno">   37</span>&#160;                <a class="code" href="classPololu.html#a7cce7354fa89281c29c5c3a453207243">serialCom_</a>-&gt;<a class="code" href="classSerialComLINUX.html#aeef058fc40479698cdf94efadb9ca457">closeSerialCom</a>();</div><div class="line"><a name="l00038"></a><span class="lineno">   38</span>&#160;                <span class="keyword">delete</span> <a class="code" href="classPololu.html#a7cce7354fa89281c29c5c3a453207243">serialCom_</a>;</div><div class="line"><a name="l00039"></a><span class="lineno">   39</span>&#160;        }</div><div class="line"><a name="l00040"></a><span class="lineno">   40</span>&#160;        <a class="code" href="classPololu.html#aeb681b4f2f39a1bf9e2df0155d9f44db">isComPortOpen_</a> = <span class="keyword">false</span>;</div><div class="line"><a name="l00041"></a><span class="lineno">   41</span>&#160;        <span class="keywordflow">return</span>;</div><div class="line"><a name="l00042"></a><span class="lineno">   42</span>&#160;}</div><div class="line"><a name="l00043"></a><span class="lineno">   43</span>&#160;</div><div class="line"><a name="l00044"></a><span class="lineno"><a class="line" href="classPololu.html#ad002d2eada218f15cdf72b3428097cb2">   44</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="classPololu.html#ad002d2eada218f15cdf72b3428097cb2">Pololu::openConnection</a>(){</div><div class="line"><a name="l00045"></a><span class="lineno">   45</span>&#160;    <span class="keywordflow">try</span>{</div><div class="line"><a name="l00046"></a><span class="lineno">   46</span>&#160;        <a class="code" href="classPololu.html#a7cce7354fa89281c29c5c3a453207243">serialCom_</a>-&gt;<a class="code" href="classSerialComLINUX.html#aeef058fc40479698cdf94efadb9ca457">closeSerialCom</a>();</div><div class="line"><a name="l00047"></a><span class="lineno">   47</span>&#160;        <a class="code" href="classPololu.html#a7cce7354fa89281c29c5c3a453207243">serialCom_</a>-&gt;<a class="code" href="classSerialComLINUX.html#a5e1293331b119354ddac6f1c6e104252">openSerialCom</a>();</div><div class="line"><a name="l00048"></a><span class="lineno">   48</span>&#160;        <a class="code" href="classPololu.html#aeb681b4f2f39a1bf9e2df0155d9f44db">isComPortOpen_</a> = <span class="keyword">true</span>;</div><div class="line"><a name="l00049"></a><span class="lineno">   49</span>&#160;        <span class="keywordflow">return</span>;</div><div class="line"><a name="l00050"></a><span class="lineno">   50</span>&#160;    }<span class="keywordflow">catch</span>(<a class="code" href="classExceptionSerialCom.html">ExceptionSerialCom</a>  *e){</div><div class="line"><a name="l00051"></a><span class="lineno">   51</span>&#160;        <a class="code" href="classPololu.html#aeb681b4f2f39a1bf9e2df0155d9f44db">isComPortOpen_</a> = <span class="keyword">false</span>;</div><div class="line"><a name="l00052"></a><span class="lineno">   52</span>&#160;        <span class="keywordflow">throw</span> <span class="keyword">new</span> <a class="code" href="classExceptionPololu.html">ExceptionPololu</a>(<span class="keywordtype">string</span>(<span class="stringliteral">&quot;openConnection::&quot;</span>) + e-&gt;<a class="code" href="classExceptionSerialCom.html#aea650457d45bc8c84528f9f4eefe5dbe">getMsg</a>());</div><div class="line"><a name="l00053"></a><span class="lineno">   53</span>&#160;    }<span class="keywordflow">catch</span> (std::string &amp;errorMessage){</div><div class="line"><a name="l00054"></a><span class="lineno">   54</span>&#160;        <a class="code" href="classPololu.html#aeb681b4f2f39a1bf9e2df0155d9f44db">isComPortOpen_</a> = <span class="keyword">false</span>;</div><div class="line"><a name="l00055"></a><span class="lineno">   55</span>&#160;        <span class="keywordflow">throw</span> <span class="keyword">new</span> <a class="code" href="classExceptionPololu.html">ExceptionPololu</a>(<span class="keywordtype">string</span>(<span class="stringliteral">&quot;openConnection::&quot;</span>) + errorMessage);</div><div class="line"><a name="l00056"></a><span class="lineno">   56</span>&#160;    }<span class="keywordflow">catch</span>(...){</div><div class="line"><a name="l00057"></a><span class="lineno">   57</span>&#160;        <a class="code" href="classPololu.html#aeb681b4f2f39a1bf9e2df0155d9f44db">isComPortOpen_</a> = <span class="keyword">false</span>;</div><div class="line"><a name="l00058"></a><span class="lineno">   58</span>&#160;        <span class="keywordflow">throw</span> <span class="keyword">new</span> <a class="code" href="classExceptionPololu.html">ExceptionPololu</a>(<span class="keywordtype">string</span>(<span class="stringliteral">&quot;openConnection::Unknown error while openSerial&quot;</span>));</div><div class="line"><a name="l00059"></a><span class="lineno">   59</span>&#160;    }</div><div class="line"><a name="l00060"></a><span class="lineno">   60</span>&#160;}</div><div class="line"><a name="l00061"></a><span class="lineno">   61</span>&#160;</div><div class="line"><a name="l00062"></a><span class="lineno"><a class="line" href="classPololu.html#a20893d84c4fdc562cbb83a18785e7c4a">   62</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="classPololu.html#a20893d84c4fdc562cbb83a18785e7c4a">Pololu::closeConnection</a>(){</div><div class="line"><a name="l00063"></a><span class="lineno">   63</span>&#160;    <span class="keywordflow">try</span>{</div><div class="line"><a name="l00064"></a><span class="lineno">   64</span>&#160;        <a class="code" href="classPololu.html#a7cce7354fa89281c29c5c3a453207243">serialCom_</a>-&gt;<a class="code" href="classSerialComLINUX.html#aeef058fc40479698cdf94efadb9ca457">closeSerialCom</a>();</div><div class="line"><a name="l00065"></a><span class="lineno">   65</span>&#160;        <a class="code" href="classPololu.html#aeb681b4f2f39a1bf9e2df0155d9f44db">isComPortOpen_</a> = <span class="keyword">false</span>;</div><div class="line"><a name="l00066"></a><span class="lineno">   66</span>&#160;        <span class="keywordflow">return</span>;</div><div class="line"><a name="l00067"></a><span class="lineno">   67</span>&#160;    }<span class="keywordflow">catch</span>(<a class="code" href="classExceptionSerialCom.html">ExceptionSerialCom</a>  *e){</div><div class="line"><a name="l00068"></a><span class="lineno">   68</span>&#160;        <a class="code" href="classPololu.html#aeb681b4f2f39a1bf9e2df0155d9f44db">isComPortOpen_</a> = <span class="keyword">false</span>;</div><div class="line"><a name="l00069"></a><span class="lineno">   69</span>&#160;        <span class="keywordflow">throw</span> <span class="keyword">new</span> <a class="code" href="classExceptionPololu.html">ExceptionPololu</a>(<span class="keywordtype">string</span>(<span class="stringliteral">&quot;closeConnection::&quot;</span>) + e-&gt;<a class="code" href="classExceptionSerialCom.html#aea650457d45bc8c84528f9f4eefe5dbe">getMsg</a>());</div><div class="line"><a name="l00070"></a><span class="lineno">   70</span>&#160;    }<span class="keywordflow">catch</span> (std::string &amp;errorMessage){</div><div class="line"><a name="l00071"></a><span class="lineno">   71</span>&#160;        <a class="code" href="classPololu.html#aeb681b4f2f39a1bf9e2df0155d9f44db">isComPortOpen_</a> = <span class="keyword">false</span>;</div><div class="line"><a name="l00072"></a><span class="lineno">   72</span>&#160;        <span class="keywordflow">throw</span> <span class="keyword">new</span> <a class="code" href="classExceptionPololu.html">ExceptionPololu</a>(<span class="keywordtype">string</span>(<span class="stringliteral">&quot;closeConnection::&quot;</span>) + errorMessage);</div><div class="line"><a name="l00073"></a><span class="lineno">   73</span>&#160;    }<span class="keywordflow">catch</span>(...){</div><div class="line"><a name="l00074"></a><span class="lineno">   74</span>&#160;        <a class="code" href="classPololu.html#aeb681b4f2f39a1bf9e2df0155d9f44db">isComPortOpen_</a> = <span class="keyword">false</span>;</div><div class="line"><a name="l00075"></a><span class="lineno">   75</span>&#160;        <span class="keywordflow">throw</span> <span class="keyword">new</span> <a class="code" href="classExceptionPololu.html">ExceptionPololu</a>(<span class="keywordtype">string</span>(<span class="stringliteral">&quot;closeConnection::Unknown error while executing closeSerial.&quot;</span>));</div><div class="line"><a name="l00076"></a><span class="lineno">   76</span>&#160;    }</div><div class="line"><a name="l00077"></a><span class="lineno">   77</span>&#160;}</div><div class="line"><a name="l00078"></a><span class="lineno">   78</span>&#160;</div><div class="line"><a name="l00079"></a><span class="lineno"><a class="line" href="classPololu.html#a9df8efb22b92bbff7b01dd539930c207">   79</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="classPololu.html#a9df8efb22b92bbff7b01dd539930c207">Pololu::initConnection</a>(<span class="keyword">const</span> <span class="keywordtype">char</span>* portName, <span class="keywordtype">unsigned</span> <span class="keywordtype">short</span> baudRate){</div><div class="line"><a name="l00080"></a><span class="lineno">   80</span>&#160;        <span class="keywordflow">try</span>{</div><div class="line"><a name="l00081"></a><span class="lineno">   81</span>&#160;                this-&gt;<a class="code" href="classPololu.html#a20893d84c4fdc562cbb83a18785e7c4a">closeConnection</a>();</div><div class="line"><a name="l00082"></a><span class="lineno">   82</span>&#160;                <a class="code" href="classPololu.html#aeb681b4f2f39a1bf9e2df0155d9f44db">isComPortOpen_</a> = <span class="keyword">false</span>;</div><div class="line"><a name="l00083"></a><span class="lineno">   83</span>&#160;                <a class="code" href="classPololu.html#a7cce7354fa89281c29c5c3a453207243">serialCom_</a>-&gt;<a class="code" href="classSerialComLINUX.html#a3969e919017724bf151ca433a9c4c52c">initSerialCom</a>(portName, baudRate);</div><div class="line"><a name="l00084"></a><span class="lineno">   84</span>&#160;        }<span class="keywordflow">catch</span> (<a class="code" href="classIException.html">IException</a> *e) {</div><div class="line"><a name="l00085"></a><span class="lineno">   85</span>&#160;                <a class="code" href="classPololu.html#aeb681b4f2f39a1bf9e2df0155d9f44db">isComPortOpen_</a> = <span class="keyword">false</span>;</div><div class="line"><a name="l00086"></a><span class="lineno">   86</span>&#160;                <span class="keywordtype">string</span> msg(<span class="stringliteral">&quot;initConnection::Error while closing and initializing the serial com.&quot;</span>);</div><div class="line"><a name="l00087"></a><span class="lineno">   87</span>&#160;                <span class="keywordflow">throw</span> <span class="keyword">new</span> <a class="code" href="classExceptionPololu.html">ExceptionPololu</a>(msg);</div><div class="line"><a name="l00088"></a><span class="lineno">   88</span>&#160;        }<span class="keywordflow">catch</span>(...){</div><div class="line"><a name="l00089"></a><span class="lineno">   89</span>&#160;                <a class="code" href="classPololu.html#aeb681b4f2f39a1bf9e2df0155d9f44db">isComPortOpen_</a> = <span class="keyword">false</span>;</div><div class="line"><a name="l00090"></a><span class="lineno">   90</span>&#160;                <span class="keywordtype">string</span> msg(<span class="stringliteral">&quot;initConnection:: Unknown error while closing and initializing the serial com.&quot;</span>);</div><div class="line"><a name="l00091"></a><span class="lineno">   91</span>&#160;                <span class="keywordflow">throw</span> <span class="keyword">new</span> <a class="code" href="classExceptionPololu.html">ExceptionPololu</a>(msg);</div><div class="line"><a name="l00092"></a><span class="lineno">   92</span>&#160;        }</div><div class="line"><a name="l00093"></a><span class="lineno">   93</span>&#160;}</div><div class="line"><a name="l00094"></a><span class="lineno">   94</span>&#160;</div><div class="line"><a name="l00095"></a><span class="lineno">   95</span>&#160;</div><div class="line"><a name="l00096"></a><span class="lineno"><a class="line" href="classPololu.html#a1f24fec8da27e5e0e40fb24b88e70858">   96</a></span>&#160;<span class="keywordtype">unsigned</span> <span class="keywordtype">short</span> <a class="code" href="classPololu.html#a1f24fec8da27e5e0e40fb24b88e70858">Pololu::setPosition</a>(<span class="keywordtype">unsigned</span> <span class="keywordtype">short</span> servo, <span class="keywordtype">unsigned</span> <span class="keywordtype">short</span> goToPosition){</div><div class="line"><a name="l00097"></a><span class="lineno">   97</span>&#160;        <span class="keywordflow">if</span>(!<a class="code" href="classPololu.html#aeb681b4f2f39a1bf9e2df0155d9f44db">isComPortOpen_</a>){</div><div class="line"><a name="l00098"></a><span class="lineno">   98</span>&#160;                <span class="keywordtype">string</span> msg(<span class="stringliteral">&quot;setPosition:: serial communication port is closed. &quot;</span>);</div><div class="line"><a name="l00099"></a><span class="lineno">   99</span>&#160;                msg += string(<span class="stringliteral">&quot;First call copenConnection methods.&quot;</span>);</div><div class="line"><a name="l00100"></a><span class="lineno">  100</span>&#160;                <span class="keywordflow">throw</span> <span class="keyword">new</span> <a class="code" href="classExceptionPololu.html">ExceptionPololu</a>(msg);</div><div class="line"><a name="l00101"></a><span class="lineno">  101</span>&#160;        }</div><div class="line"><a name="l00102"></a><span class="lineno">  102</span>&#160;</div><div class="line"><a name="l00103"></a><span class="lineno">  103</span>&#160;</div><div class="line"><a name="l00104"></a><span class="lineno">  104</span>&#160;    <span class="comment">/* Generates the command for the controller.</span></div><div class="line"><a name="l00105"></a><span class="lineno">  105</span>&#160;<span class="comment">     * 0x84 = Pololu command for setting the position</span></div><div class="line"><a name="l00106"></a><span class="lineno">  106</span>&#160;<span class="comment">     * servo = servo to address as a transfer parameter</span></div><div class="line"><a name="l00107"></a><span class="lineno">  107</span>&#160;<span class="comment">     * goToPositiion = divided into 2 bytes, first the low bits, then the high bits</span></div><div class="line"><a name="l00108"></a><span class="lineno">  108</span>&#160;<span class="comment">     */</span></div><div class="line"><a name="l00109"></a><span class="lineno">  109</span>&#160;    <span class="keywordtype">unsigned</span> <span class="keywordtype">short</span> sizeCommand = 4;</div><div class="line"><a name="l00110"></a><span class="lineno">  110</span>&#160;    <span class="keywordtype">unsigned</span> <span class="keywordtype">char</span> command[] = {0x84, (<span class="keywordtype">unsigned</span> char)servo, (<span class="keywordtype">unsigned</span> <span class="keywordtype">char</span>)(goToPosition &amp; 0x7F), (<span class="keywordtype">unsigned</span> <span class="keywordtype">char</span>)((goToPosition &gt;&gt; 7) &amp; 0x7F)};</div><div class="line"><a name="l00111"></a><span class="lineno">  111</span>&#160;    <span class="keywordflow">try</span></div><div class="line"><a name="l00112"></a><span class="lineno">  112</span>&#160;    {</div><div class="line"><a name="l00113"></a><span class="lineno">  113</span>&#160;        <a class="code" href="classPololu.html#a7cce7354fa89281c29c5c3a453207243">serialCom_</a>-&gt;<a class="code" href="classSerialComLINUX.html#aeb8710a98c8c7910d1751d509c9074b2">writeSerialCom</a>(command, sizeCommand, NULL, 0);</div><div class="line"><a name="l00114"></a><span class="lineno">  114</span>&#160;    }<span class="keywordflow">catch</span> (<a class="code" href="classIException.html">IException</a> *e){</div><div class="line"><a name="l00115"></a><span class="lineno">  115</span>&#160;        <span class="keywordtype">string</span> msg(<span class="stringliteral">&quot;setPosition::error while sending the position data.&quot;</span>);</div><div class="line"><a name="l00116"></a><span class="lineno">  116</span>&#160;        msg += e-&gt;<a class="code" href="classIException.html#a41d25da6a3bafe606951879e85e793a0">getMsg</a>();</div><div class="line"><a name="l00117"></a><span class="lineno">  117</span>&#160;        <span class="keywordflow">throw</span> <span class="keyword">new</span> <a class="code" href="classExceptionPololu.html">ExceptionPololu</a>(msg);</div><div class="line"><a name="l00118"></a><span class="lineno">  118</span>&#160;    }<span class="keywordflow">catch</span> (std::string &amp;errorMessage){</div><div class="line"><a name="l00119"></a><span class="lineno">  119</span>&#160;        <span class="keywordtype">string</span> msg(<span class="stringliteral">&quot;setPosition::error while sending the position data.&quot;</span>);</div><div class="line"><a name="l00120"></a><span class="lineno">  120</span>&#160;        msg += errorMessage;</div><div class="line"><a name="l00121"></a><span class="lineno">  121</span>&#160;        <span class="keywordflow">throw</span> <span class="keyword">new</span> <a class="code" href="classExceptionPololu.html">ExceptionPololu</a>(msg);</div><div class="line"><a name="l00122"></a><span class="lineno">  122</span>&#160;    }<span class="keywordflow">catch</span>(...){</div><div class="line"><a name="l00123"></a><span class="lineno">  123</span>&#160;        <span class="keywordtype">string</span> msg(<span class="stringliteral">&quot;setPosition::unknown error while sending the position data.&quot;</span>);</div><div class="line"><a name="l00124"></a><span class="lineno">  124</span>&#160;        <span class="keywordflow">throw</span> <span class="keyword">new</span> <a class="code" href="classExceptionPololu.html">ExceptionPololu</a>(msg);</div><div class="line"><a name="l00125"></a><span class="lineno">  125</span>&#160;    }</div><div class="line"><a name="l00126"></a><span class="lineno">  126</span>&#160;    <span class="keywordflow">return</span> goToPosition;</div><div class="line"><a name="l00127"></a><span class="lineno">  127</span>&#160;}</div><div class="line"><a name="l00128"></a><span class="lineno">  128</span>&#160;</div><div class="line"><a name="l00129"></a><span class="lineno">  129</span>&#160;</div><div class="line"><a name="l00130"></a><span class="lineno"><a class="line" href="classPololu.html#aa990539f5c36628ea0dde3b5c0618128">  130</a></span>&#160;<span class="keywordtype">bool</span> <a class="code" href="classPololu.html#aa990539f5c36628ea0dde3b5c0618128">Pololu::setSpeed</a>(<span class="keywordtype">unsigned</span> <span class="keywordtype">short</span> servo, <span class="keywordtype">unsigned</span> <span class="keywordtype">short</span> goToSpeed){</div><div class="line"><a name="l00131"></a><span class="lineno">  131</span>&#160;        <span class="keywordflow">if</span>(!<a class="code" href="classPololu.html#aeb681b4f2f39a1bf9e2df0155d9f44db">isComPortOpen_</a>){</div><div class="line"><a name="l00132"></a><span class="lineno">  132</span>&#160;                <span class="keywordtype">string</span> msg(<span class="stringliteral">&quot;setSpeed:: serial communication port is closed&quot;</span>);</div><div class="line"><a name="l00133"></a><span class="lineno">  133</span>&#160;                msg += string(<span class="stringliteral">&quot;First call copenConnection.&quot;</span>);</div><div class="line"><a name="l00134"></a><span class="lineno">  134</span>&#160;                <span class="keywordflow">throw</span> <span class="keyword">new</span> <a class="code" href="classExceptionPololu.html">ExceptionPololu</a>(msg);</div><div class="line"><a name="l00135"></a><span class="lineno">  135</span>&#160;        }</div><div class="line"><a name="l00136"></a><span class="lineno">  136</span>&#160;</div><div class="line"><a name="l00137"></a><span class="lineno">  137</span>&#160;</div><div class="line"><a name="l00138"></a><span class="lineno">  138</span>&#160;    <span class="comment">/* Generates the command for the controller.</span></div><div class="line"><a name="l00139"></a><span class="lineno">  139</span>&#160;<span class="comment">     * 0x87 = Pololu command for setting the speed</span></div><div class="line"><a name="l00140"></a><span class="lineno">  140</span>&#160;<span class="comment">     * servo = servo to address as a transfer parameter</span></div><div class="line"><a name="l00141"></a><span class="lineno">  141</span>&#160;<span class="comment">     * goToSpeed = divided into 2 bytes, first the low bits, then the high bits</span></div><div class="line"><a name="l00142"></a><span class="lineno">  142</span>&#160;<span class="comment">     */</span></div><div class="line"><a name="l00143"></a><span class="lineno">  143</span>&#160;    <span class="keywordtype">unsigned</span> <span class="keywordtype">short</span> sizeCommand = 4;</div><div class="line"><a name="l00144"></a><span class="lineno">  144</span>&#160;    <span class="keywordtype">unsigned</span> <span class="keywordtype">char</span> command[] = {0x87, (<span class="keywordtype">unsigned</span> char)servo, (<span class="keywordtype">unsigned</span> <span class="keywordtype">char</span>)(goToSpeed &amp; 0x7F), (<span class="keywordtype">unsigned</span> <span class="keywordtype">char</span>)((goToSpeed &gt;&gt; 7) &amp; 0x7F)};</div><div class="line"><a name="l00145"></a><span class="lineno">  145</span>&#160;    <span class="keywordflow">try</span></div><div class="line"><a name="l00146"></a><span class="lineno">  146</span>&#160;    {</div><div class="line"><a name="l00147"></a><span class="lineno">  147</span>&#160;        <a class="code" href="classPololu.html#a7cce7354fa89281c29c5c3a453207243">serialCom_</a>-&gt;<a class="code" href="classSerialComLINUX.html#aeb8710a98c8c7910d1751d509c9074b2">writeSerialCom</a>(command, sizeCommand, NULL, 0);</div><div class="line"><a name="l00148"></a><span class="lineno">  148</span>&#160;    }<span class="keywordflow">catch</span> (<a class="code" href="classIException.html">IException</a> *e){</div><div class="line"><a name="l00149"></a><span class="lineno">  149</span>&#160;        <span class="keywordtype">string</span> msg(<span class="stringliteral">&quot;setSpeed::error while sending the max speed data.&quot;</span>);</div><div class="line"><a name="l00150"></a><span class="lineno">  150</span>&#160;        msg += e-&gt;<a class="code" href="classIException.html#a41d25da6a3bafe606951879e85e793a0">getMsg</a>();</div><div class="line"><a name="l00151"></a><span class="lineno">  151</span>&#160;        <span class="keywordflow">throw</span> <span class="keyword">new</span> <a class="code" href="classExceptionPololu.html">ExceptionPololu</a>(msg);</div><div class="line"><a name="l00152"></a><span class="lineno">  152</span>&#160;    }<span class="keywordflow">catch</span> (std::string &amp;errorMessage){</div><div class="line"><a name="l00153"></a><span class="lineno">  153</span>&#160;        <span class="keywordtype">string</span> msg(<span class="stringliteral">&quot;setSpeed::error while sending the max speed data.&quot;</span>);</div><div class="line"><a name="l00154"></a><span class="lineno">  154</span>&#160;        msg += errorMessage;</div><div class="line"><a name="l00155"></a><span class="lineno">  155</span>&#160;        <span class="keywordflow">throw</span> <span class="keyword">new</span> <a class="code" href="classExceptionPololu.html">ExceptionPololu</a>(msg);</div><div class="line"><a name="l00156"></a><span class="lineno">  156</span>&#160;    }<span class="keywordflow">catch</span>(...){</div><div class="line"><a name="l00157"></a><span class="lineno">  157</span>&#160;        <span class="keywordtype">string</span> msg(<span class="stringliteral">&quot;setSpeed::unknown error while sending the max speed data.&quot;</span>);</div><div class="line"><a name="l00158"></a><span class="lineno">  158</span>&#160;        <span class="keywordflow">throw</span> <span class="keyword">new</span> <a class="code" href="classExceptionPololu.html">ExceptionPololu</a>(msg);</div><div class="line"><a name="l00159"></a><span class="lineno">  159</span>&#160;    }</div><div class="line"><a name="l00160"></a><span class="lineno">  160</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">true</span>;</div><div class="line"><a name="l00161"></a><span class="lineno">  161</span>&#160;}</div><div class="line"><a name="l00162"></a><span class="lineno">  162</span>&#160;</div><div class="line"><a name="l00163"></a><span class="lineno">  163</span>&#160;</div><div class="line"><a name="l00164"></a><span class="lineno"><a class="line" href="classPololu.html#af7993f6d66786503c017682730a0e3dd">  164</a></span>&#160;<span class="keywordtype">bool</span> <a class="code" href="classPololu.html#af7993f6d66786503c017682730a0e3dd">Pololu::setAcceleration</a>(<span class="keywordtype">unsigned</span> <span class="keywordtype">short</span> servo, <span class="keywordtype">unsigned</span> <span class="keywordtype">short</span> goToAcceleration){</div><div class="line"><a name="l00165"></a><span class="lineno">  165</span>&#160;        <span class="keywordflow">if</span>(!<a class="code" href="classPololu.html#aeb681b4f2f39a1bf9e2df0155d9f44db">isComPortOpen_</a>){</div><div class="line"><a name="l00166"></a><span class="lineno">  166</span>&#160;                <span class="keywordtype">string</span> msg(<span class="stringliteral">&quot;setAcceleration:: serial communication port is closed&quot;</span>);</div><div class="line"><a name="l00167"></a><span class="lineno">  167</span>&#160;                msg += string(<span class="stringliteral">&quot;First call copenConnection.&quot;</span>);</div><div class="line"><a name="l00168"></a><span class="lineno">  168</span>&#160;                <span class="keywordflow">throw</span> <span class="keyword">new</span> <a class="code" href="classExceptionPololu.html">ExceptionPololu</a>(msg);</div><div class="line"><a name="l00169"></a><span class="lineno">  169</span>&#160;        }</div><div class="line"><a name="l00170"></a><span class="lineno">  170</span>&#160;</div><div class="line"><a name="l00171"></a><span class="lineno">  171</span>&#160;</div><div class="line"><a name="l00172"></a><span class="lineno">  172</span>&#160;    <span class="comment">/* Generates the command for the controller.</span></div><div class="line"><a name="l00173"></a><span class="lineno">  173</span>&#160;<span class="comment">     * 0x89 = Pololu command for setting the acceleration</span></div><div class="line"><a name="l00174"></a><span class="lineno">  174</span>&#160;<span class="comment">     * servo = servo to address as a transfer parameter</span></div><div class="line"><a name="l00175"></a><span class="lineno">  175</span>&#160;<span class="comment">     * goToAcceleration = divided into 2 bytes, first the low bits, then the high bits</span></div><div class="line"><a name="l00176"></a><span class="lineno">  176</span>&#160;<span class="comment">     */</span></div><div class="line"><a name="l00177"></a><span class="lineno">  177</span>&#160;    <span class="keywordtype">unsigned</span> <span class="keywordtype">short</span> sizeCommand = 4;</div><div class="line"><a name="l00178"></a><span class="lineno">  178</span>&#160;</div><div class="line"><a name="l00179"></a><span class="lineno">  179</span>&#160;    <span class="keywordtype">unsigned</span> <span class="keywordtype">char</span> command[] = {0x89, (<span class="keywordtype">unsigned</span> char)servo, (<span class="keywordtype">unsigned</span> <span class="keywordtype">char</span>)(goToAcceleration &amp; 0x7F), (<span class="keywordtype">unsigned</span> <span class="keywordtype">char</span>)((goToAcceleration &gt;&gt; 7) &amp; 0x7F)};</div><div class="line"><a name="l00180"></a><span class="lineno">  180</span>&#160;    <span class="keywordflow">try</span></div><div class="line"><a name="l00181"></a><span class="lineno">  181</span>&#160;    {</div><div class="line"><a name="l00182"></a><span class="lineno">  182</span>&#160;        <a class="code" href="classPololu.html#a7cce7354fa89281c29c5c3a453207243">serialCom_</a>-&gt;<a class="code" href="classSerialComLINUX.html#aeb8710a98c8c7910d1751d509c9074b2">writeSerialCom</a>(command, sizeCommand, NULL, 0);</div><div class="line"><a name="l00183"></a><span class="lineno">  183</span>&#160;    }<span class="keywordflow">catch</span> (<a class="code" href="classIException.html">IException</a> *e){</div><div class="line"><a name="l00184"></a><span class="lineno">  184</span>&#160;        <span class="keywordtype">string</span> msg(<span class="stringliteral">&quot;setAcceleration::error while sending the max acceleration data.&quot;</span>);</div><div class="line"><a name="l00185"></a><span class="lineno">  185</span>&#160;        msg += e-&gt;<a class="code" href="classIException.html#a41d25da6a3bafe606951879e85e793a0">getMsg</a>();</div><div class="line"><a name="l00186"></a><span class="lineno">  186</span>&#160;        <span class="keywordflow">throw</span> <span class="keyword">new</span> <a class="code" href="classExceptionPololu.html">ExceptionPololu</a>(msg);</div><div class="line"><a name="l00187"></a><span class="lineno">  187</span>&#160;    }<span class="keywordflow">catch</span> (std::string &amp;errorMessage){</div><div class="line"><a name="l00188"></a><span class="lineno">  188</span>&#160;        <span class="keywordtype">string</span> msg(<span class="stringliteral">&quot;setAcceleration::error while sending the max acceleration data.&quot;</span>);</div><div class="line"><a name="l00189"></a><span class="lineno">  189</span>&#160;        msg += errorMessage;</div><div class="line"><a name="l00190"></a><span class="lineno">  190</span>&#160;        <span class="keywordflow">throw</span> <span class="keyword">new</span> <a class="code" href="classExceptionPololu.html">ExceptionPololu</a>(msg);</div><div class="line"><a name="l00191"></a><span class="lineno">  191</span>&#160;    }<span class="keywordflow">catch</span>(...){</div><div class="line"><a name="l00192"></a><span class="lineno">  192</span>&#160;        <span class="keywordtype">string</span> msg(<span class="stringliteral">&quot;setAcceleration::error while sending the max acceleration data.&quot;</span>);</div><div class="line"><a name="l00193"></a><span class="lineno">  193</span>&#160;        <span class="keywordflow">throw</span> <span class="keyword">new</span> <a class="code" href="classExceptionPololu.html">ExceptionPololu</a>(msg);</div><div class="line"><a name="l00194"></a><span class="lineno">  194</span>&#160;    }</div><div class="line"><a name="l00195"></a><span class="lineno">  195</span>&#160;    <span class="keywordflow">return</span> 1;</div><div class="line"><a name="l00196"></a><span class="lineno">  196</span>&#160;}</div><div class="line"><a name="l00197"></a><span class="lineno">  197</span>&#160;</div><div class="line"><a name="l00198"></a><span class="lineno"><a class="line" href="classPololu.html#a51a9914e19918b4c43c9ec58da59147c">  198</a></span>&#160;<span class="keywordtype">unsigned</span> <span class="keywordtype">short</span> <a class="code" href="classPololu.html#a51a9914e19918b4c43c9ec58da59147c">Pololu::getPosition</a>(<span class="keywordtype">unsigned</span> <span class="keywordtype">short</span> servo){</div><div class="line"><a name="l00199"></a><span class="lineno">  199</span>&#160;        <span class="keywordflow">if</span>(!<a class="code" href="classPololu.html#aeb681b4f2f39a1bf9e2df0155d9f44db">isComPortOpen_</a>){</div><div class="line"><a name="l00200"></a><span class="lineno">  200</span>&#160;                <span class="keywordtype">string</span> msg(<span class="stringliteral">&quot;getPosition:: serial communication port is closed&quot;</span>);</div><div class="line"><a name="l00201"></a><span class="lineno">  201</span>&#160;                msg += string(<span class="stringliteral">&quot;First call copenConnection.&quot;</span>);</div><div class="line"><a name="l00202"></a><span class="lineno">  202</span>&#160;                <span class="keywordflow">throw</span> <span class="keyword">new</span> <a class="code" href="classExceptionPololu.html">ExceptionPololu</a>(msg);</div><div class="line"><a name="l00203"></a><span class="lineno">  203</span>&#160;        }</div><div class="line"><a name="l00204"></a><span class="lineno">  204</span>&#160;</div><div class="line"><a name="l00205"></a><span class="lineno">  205</span>&#160;</div><div class="line"><a name="l00206"></a><span class="lineno">  206</span>&#160;    <span class="comment">/* Generates the command for the controller.</span></div><div class="line"><a name="l00207"></a><span class="lineno">  207</span>&#160;<span class="comment">     * 0x90 = Pololu command for reading out the position</span></div><div class="line"><a name="l00208"></a><span class="lineno">  208</span>&#160;<span class="comment">     * servo = servo to address as a transfer parameter</span></div><div class="line"><a name="l00209"></a><span class="lineno">  209</span>&#160;<span class="comment">     */</span></div><div class="line"><a name="l00210"></a><span class="lineno">  210</span>&#160;    <span class="keywordtype">unsigned</span> <span class="keywordtype">short</span> sizeCommand = 2;</div><div class="line"><a name="l00211"></a><span class="lineno">  211</span>&#160;    <span class="keywordtype">unsigned</span> <span class="keywordtype">short</span> sizeResponse = 2;</div><div class="line"><a name="l00212"></a><span class="lineno">  212</span>&#160;    <span class="keywordtype">unsigned</span> <span class="keywordtype">char</span> response[sizeResponse];</div><div class="line"><a name="l00213"></a><span class="lineno">  213</span>&#160;</div><div class="line"><a name="l00214"></a><span class="lineno">  214</span>&#160;    <span class="keywordtype">unsigned</span> <span class="keywordtype">char</span> command[] = {0x90, (<span class="keywordtype">unsigned</span> char)servo};</div><div class="line"><a name="l00215"></a><span class="lineno">  215</span>&#160;    <span class="keywordflow">try</span></div><div class="line"><a name="l00216"></a><span class="lineno">  216</span>&#160;    {</div><div class="line"><a name="l00217"></a><span class="lineno">  217</span>&#160;        <a class="code" href="classPololu.html#a7cce7354fa89281c29c5c3a453207243">serialCom_</a>-&gt;<a class="code" href="classSerialComLINUX.html#aeb8710a98c8c7910d1751d509c9074b2">writeSerialCom</a>(command, sizeCommand, response, sizeResponse);</div><div class="line"><a name="l00218"></a><span class="lineno">  218</span>&#160;    }<span class="keywordflow">catch</span> (<a class="code" href="classIException.html">IException</a> *e){</div><div class="line"><a name="l00219"></a><span class="lineno">  219</span>&#160;        <span class="keywordtype">string</span> msg(<span class="stringliteral">&quot;getPosition::error while sending the &#39;get position&#39; data:&quot;</span>);</div><div class="line"><a name="l00220"></a><span class="lineno">  220</span>&#160;        msg += e-&gt;<a class="code" href="classIException.html#a41d25da6a3bafe606951879e85e793a0">getMsg</a>();</div><div class="line"><a name="l00221"></a><span class="lineno">  221</span>&#160;        <span class="keywordflow">throw</span> <span class="keyword">new</span> <a class="code" href="classExceptionPololu.html">ExceptionPololu</a>(msg);</div><div class="line"><a name="l00222"></a><span class="lineno">  222</span>&#160;    }<span class="keywordflow">catch</span> (std::string &amp;errorMessage){</div><div class="line"><a name="l00223"></a><span class="lineno">  223</span>&#160;        <span class="keywordtype">string</span> msg(<span class="stringliteral">&quot;getPosition::error while sending the &#39;get position&#39; data:&quot;</span>);</div><div class="line"><a name="l00224"></a><span class="lineno">  224</span>&#160;        msg += errorMessage;</div><div class="line"><a name="l00225"></a><span class="lineno">  225</span>&#160;        <span class="keywordflow">throw</span> <span class="keyword">new</span> <a class="code" href="classExceptionPololu.html">ExceptionPololu</a>(msg);</div><div class="line"><a name="l00226"></a><span class="lineno">  226</span>&#160;    }<span class="keywordflow">catch</span>(...){</div><div class="line"><a name="l00227"></a><span class="lineno">  227</span>&#160;        <span class="keywordtype">string</span> msg(<span class="stringliteral">&quot;getPosition:: unknown error while sending the &#39;get position&#39; data.&quot;</span>);</div><div class="line"><a name="l00228"></a><span class="lineno">  228</span>&#160;        <span class="keywordflow">throw</span> <span class="keyword">new</span> <a class="code" href="classExceptionPololu.html">ExceptionPololu</a>(msg);</div><div class="line"><a name="l00229"></a><span class="lineno">  229</span>&#160;    }</div><div class="line"><a name="l00230"></a><span class="lineno">  230</span>&#160;</div><div class="line"><a name="l00231"></a><span class="lineno">  231</span>&#160;    <span class="keywordflow">return</span> response[0] + 256 * response[1];</div><div class="line"><a name="l00232"></a><span class="lineno">  232</span>&#160;}</div><div class="line"><a name="l00233"></a><span class="lineno">  233</span>&#160;</div><div class="line"><a name="l00234"></a><span class="lineno">  234</span>&#160;</div><div class="line"><a name="l00235"></a><span class="lineno"><a class="line" href="classPololu.html#a508ff1ad49e25731a80048197568723b">  235</a></span>&#160;<span class="keywordtype">bool</span> <a class="code" href="classPololu.html#a508ff1ad49e25731a80048197568723b">Pololu::getMovingState</a>(){</div><div class="line"><a name="l00236"></a><span class="lineno">  236</span>&#160;        <span class="keywordflow">if</span>(!<a class="code" href="classPololu.html#aeb681b4f2f39a1bf9e2df0155d9f44db">isComPortOpen_</a>){</div><div class="line"><a name="l00237"></a><span class="lineno">  237</span>&#160;                <span class="keywordtype">string</span> msg(<span class="stringliteral">&quot;getMovingState:: serial communication port is closed&quot;</span>);</div><div class="line"><a name="l00238"></a><span class="lineno">  238</span>&#160;                msg += string(<span class="stringliteral">&quot;First call copenConnection.&quot;</span>);</div><div class="line"><a name="l00239"></a><span class="lineno">  239</span>&#160;                <span class="keywordflow">throw</span> <span class="keyword">new</span> <a class="code" href="classExceptionPololu.html">ExceptionPololu</a>(msg);</div><div class="line"><a name="l00240"></a><span class="lineno">  240</span>&#160;        }</div><div class="line"><a name="l00241"></a><span class="lineno">  241</span>&#160;</div><div class="line"><a name="l00242"></a><span class="lineno">  242</span>&#160;    <span class="comment">/* Generates the command for the controller.</span></div><div class="line"><a name="l00243"></a><span class="lineno">  243</span>&#160;<span class="comment">     * 0x93 = Pololu command for reading out the movement of all servos</span></div><div class="line"><a name="l00244"></a><span class="lineno">  244</span>&#160;<span class="comment">     */</span></div><div class="line"><a name="l00245"></a><span class="lineno">  245</span>&#160;    <span class="keywordtype">unsigned</span> <span class="keywordtype">short</span> sizeCommand = 1;</div><div class="line"><a name="l00246"></a><span class="lineno">  246</span>&#160;    <span class="keywordtype">unsigned</span> <span class="keywordtype">short</span> sizeResponse = 1;</div><div class="line"><a name="l00247"></a><span class="lineno">  247</span>&#160;    <span class="keywordtype">unsigned</span> <span class="keywordtype">char</span> response[sizeResponse];</div><div class="line"><a name="l00248"></a><span class="lineno">  248</span>&#160;</div><div class="line"><a name="l00249"></a><span class="lineno">  249</span>&#160;    <span class="keywordtype">unsigned</span> <span class="keywordtype">char</span> command[] = {0x93};</div><div class="line"><a name="l00250"></a><span class="lineno">  250</span>&#160;    <span class="keywordflow">try</span></div><div class="line"><a name="l00251"></a><span class="lineno">  251</span>&#160;    {</div><div class="line"><a name="l00252"></a><span class="lineno">  252</span>&#160;        <a class="code" href="classPololu.html#a7cce7354fa89281c29c5c3a453207243">serialCom_</a>-&gt;<a class="code" href="classSerialComLINUX.html#aeb8710a98c8c7910d1751d509c9074b2">writeSerialCom</a>(command, sizeCommand, response, sizeResponse);</div><div class="line"><a name="l00253"></a><span class="lineno">  253</span>&#160;    }<span class="keywordflow">catch</span> (<a class="code" href="classIException.html">IException</a> *e){</div><div class="line"><a name="l00254"></a><span class="lineno">  254</span>&#160;        <span class="keywordtype">string</span> msg(<span class="stringliteral">&quot;getMovingState:: error while sending the &#39;moving state&#39; data:&quot;</span>);</div><div class="line"><a name="l00255"></a><span class="lineno">  255</span>&#160;        msg += e-&gt;<a class="code" href="classIException.html#a41d25da6a3bafe606951879e85e793a0">getMsg</a>();</div><div class="line"><a name="l00256"></a><span class="lineno">  256</span>&#160;        <span class="keywordflow">throw</span> <span class="keyword">new</span> <a class="code" href="classExceptionPololu.html">ExceptionPololu</a>(msg);</div><div class="line"><a name="l00257"></a><span class="lineno">  257</span>&#160;    }<span class="keywordflow">catch</span> (std::string &amp;errorMessage){</div><div class="line"><a name="l00258"></a><span class="lineno">  258</span>&#160;        <span class="keywordtype">string</span> msg(<span class="stringliteral">&quot;getMovingState:: error while sending the &#39;moving state&#39; data:&quot;</span>);</div><div class="line"><a name="l00259"></a><span class="lineno">  259</span>&#160;        msg += errorMessage;</div><div class="line"><a name="l00260"></a><span class="lineno">  260</span>&#160;        <span class="keywordflow">throw</span> <span class="keyword">new</span> <a class="code" href="classExceptionPololu.html">ExceptionPololu</a>(msg);</div><div class="line"><a name="l00261"></a><span class="lineno">  261</span>&#160;    }<span class="keywordflow">catch</span>(...){</div><div class="line"><a name="l00262"></a><span class="lineno">  262</span>&#160;        <span class="keywordtype">string</span> msg(<span class="stringliteral">&quot;getMovingState:: unknown error while sending the &#39;moving state&#39; data.&quot;</span>);</div><div class="line"><a name="l00263"></a><span class="lineno">  263</span>&#160;        <span class="keywordflow">throw</span> <span class="keyword">new</span> <a class="code" href="classExceptionPololu.html">ExceptionPololu</a>(msg);</div><div class="line"><a name="l00264"></a><span class="lineno">  264</span>&#160;    }</div><div class="line"><a name="l00265"></a><span class="lineno">  265</span>&#160;    <span class="keywordflow">return</span> response[0];</div><div class="line"><a name="l00266"></a><span class="lineno">  266</span>&#160;}</div><div class="line"><a name="l00267"></a><span class="lineno">  267</span>&#160;</div><div class="line"><a name="l00268"></a><span class="lineno">  268</span>&#160;</div><div class="line"><a name="l00269"></a><span class="lineno">  269</span>&#160;</div><div class="line"><a name="l00270"></a><span class="lineno"><a class="line" href="classPololu.html#ae365c943d44a08ce45fccafa4f91781a">  270</a></span>&#160;<span class="keywordtype">unsigned</span> <span class="keywordtype">short</span> <a class="code" href="classPololu.html#ae365c943d44a08ce45fccafa4f91781a">Pololu::getErrors</a>(){</div><div class="line"><a name="l00271"></a><span class="lineno">  271</span>&#160;        <span class="keywordflow">if</span>(!<a class="code" href="classPololu.html#aeb681b4f2f39a1bf9e2df0155d9f44db">isComPortOpen_</a>){</div><div class="line"><a name="l00272"></a><span class="lineno">  272</span>&#160;                <span class="keywordtype">string</span> msg(<span class="stringliteral">&quot;getMovingState:: serial communication port is closed&quot;</span>);</div><div class="line"><a name="l00273"></a><span class="lineno">  273</span>&#160;                msg += string(<span class="stringliteral">&quot;First call copenConnection.&quot;</span>);</div><div class="line"><a name="l00274"></a><span class="lineno">  274</span>&#160;                <span class="keywordflow">throw</span> <span class="keyword">new</span> <a class="code" href="classExceptionPololu.html">ExceptionPololu</a>(msg);</div><div class="line"><a name="l00275"></a><span class="lineno">  275</span>&#160;        }</div><div class="line"><a name="l00276"></a><span class="lineno">  276</span>&#160;</div><div class="line"><a name="l00277"></a><span class="lineno">  277</span>&#160;    <span class="comment">/* Generates the command for the controller.</span></div><div class="line"><a name="l00278"></a><span class="lineno">  278</span>&#160;<span class="comment">     * 0xA1 = Pololu command for reading out error flags</span></div><div class="line"><a name="l00279"></a><span class="lineno">  279</span>&#160;<span class="comment">     */</span></div><div class="line"><a name="l00280"></a><span class="lineno">  280</span>&#160;    <span class="keywordtype">unsigned</span> <span class="keywordtype">short</span> sizeCommand = 1;</div><div class="line"><a name="l00281"></a><span class="lineno">  281</span>&#160;    <span class="keywordtype">unsigned</span> <span class="keywordtype">short</span> sizeResponse = 2;</div><div class="line"><a name="l00282"></a><span class="lineno">  282</span>&#160;    <span class="keywordtype">unsigned</span> <span class="keywordtype">char</span> response[sizeResponse];</div><div class="line"><a name="l00283"></a><span class="lineno">  283</span>&#160;</div><div class="line"><a name="l00284"></a><span class="lineno">  284</span>&#160;    <span class="keywordtype">unsigned</span> <span class="keywordtype">char</span> command[] = {0xA1};</div><div class="line"><a name="l00285"></a><span class="lineno">  285</span>&#160;</div><div class="line"><a name="l00286"></a><span class="lineno">  286</span>&#160;    <span class="keywordtype">int</span> counter = 0;</div><div class="line"><a name="l00287"></a><span class="lineno">  287</span>&#160;    <span class="keywordtype">int</span> limit = 5;</div><div class="line"><a name="l00288"></a><span class="lineno">  288</span>&#160;    <span class="keywordflow">while</span>(1){</div><div class="line"><a name="l00289"></a><span class="lineno">  289</span>&#160;        <span class="keywordflow">try</span></div><div class="line"><a name="l00290"></a><span class="lineno">  290</span>&#160;        {</div><div class="line"><a name="l00291"></a><span class="lineno">  291</span>&#160;                counter++;</div><div class="line"><a name="l00292"></a><span class="lineno">  292</span>&#160;                <a class="code" href="classPololu.html#a7cce7354fa89281c29c5c3a453207243">serialCom_</a>-&gt;<a class="code" href="classSerialComLINUX.html#aeb8710a98c8c7910d1751d509c9074b2">writeSerialCom</a>(command, sizeCommand, response, sizeResponse);</div><div class="line"><a name="l00293"></a><span class="lineno">  293</span>&#160;                <span class="keywordflow">break</span>;</div><div class="line"><a name="l00294"></a><span class="lineno">  294</span>&#160;        }<span class="keywordflow">catch</span> (<a class="code" href="classIException.html">IException</a> *e){</div><div class="line"><a name="l00295"></a><span class="lineno">  295</span>&#160;                <span class="keywordflow">if</span>(counter &lt; limit){</div><div class="line"><a name="l00296"></a><span class="lineno">  296</span>&#160;                        <span class="keywordflow">continue</span>;</div><div class="line"><a name="l00297"></a><span class="lineno">  297</span>&#160;                };</div><div class="line"><a name="l00298"></a><span class="lineno">  298</span>&#160;                <span class="keywordtype">string</span> msg(<span class="stringliteral">&quot;getErrors:: error while trying to read error data:&quot;</span>);</div><div class="line"><a name="l00299"></a><span class="lineno">  299</span>&#160;                msg += e-&gt;<a class="code" href="classIException.html#a41d25da6a3bafe606951879e85e793a0">getMsg</a>();</div><div class="line"><a name="l00300"></a><span class="lineno">  300</span>&#160;                <span class="keywordflow">throw</span> <span class="keyword">new</span> <a class="code" href="classExceptionPololu.html">ExceptionPololu</a>(msg);</div><div class="line"><a name="l00301"></a><span class="lineno">  301</span>&#160;        }<span class="keywordflow">catch</span> (std::string &amp;errorMessage){</div><div class="line"><a name="l00302"></a><span class="lineno">  302</span>&#160;                <span class="keywordflow">if</span>(counter &lt; limit){</div><div class="line"><a name="l00303"></a><span class="lineno">  303</span>&#160;                                <span class="keywordflow">continue</span>;</div><div class="line"><a name="l00304"></a><span class="lineno">  304</span>&#160;                };</div><div class="line"><a name="l00305"></a><span class="lineno">  305</span>&#160;                <span class="keywordtype">string</span> msg(<span class="stringliteral">&quot;getErrors:: error while trying to read error data:&quot;</span>);</div><div class="line"><a name="l00306"></a><span class="lineno">  306</span>&#160;                msg += errorMessage;</div><div class="line"><a name="l00307"></a><span class="lineno">  307</span>&#160;                <span class="keywordflow">throw</span> <span class="keyword">new</span> <a class="code" href="classExceptionPololu.html">ExceptionPololu</a>(msg);</div><div class="line"><a name="l00308"></a><span class="lineno">  308</span>&#160;        }<span class="keywordflow">catch</span>(...){</div><div class="line"><a name="l00309"></a><span class="lineno">  309</span>&#160;                <span class="keywordflow">if</span>(counter &lt; limit){</div><div class="line"><a name="l00310"></a><span class="lineno">  310</span>&#160;                                <span class="keywordflow">continue</span>;</div><div class="line"><a name="l00311"></a><span class="lineno">  311</span>&#160;                };</div><div class="line"><a name="l00312"></a><span class="lineno">  312</span>&#160;                <span class="keywordtype">string</span> msg(<span class="stringliteral">&quot;getErrors:: unknown error while trying to read error data.&quot;</span>);</div><div class="line"><a name="l00313"></a><span class="lineno">  313</span>&#160;                <span class="keywordflow">throw</span> <span class="keyword">new</span> <a class="code" href="classExceptionPololu.html">ExceptionPololu</a>(msg);</div><div class="line"><a name="l00314"></a><span class="lineno">  314</span>&#160;        }</div><div class="line"><a name="l00315"></a><span class="lineno">  315</span>&#160;    }</div><div class="line"><a name="l00316"></a><span class="lineno">  316</span>&#160;    <span class="keywordflow">return</span> response[0] + (256 * response[1]);</div><div class="line"><a name="l00317"></a><span class="lineno">  317</span>&#160;}</div><div class="ttc" id="classExceptionSerialCom_html_aea650457d45bc8c84528f9f4eefe5dbe"><div class="ttname"><a href="classExceptionSerialCom.html#aea650457d45bc8c84528f9f4eefe5dbe">ExceptionSerialCom::getMsg</a></div><div class="ttdeci">string getMsg()</div><div class="ttdef"><b>Definition:</b> <a href="SerialCom_8hpp_source.html#l00194">SerialCom.hpp:194</a></div></div>
<div class="ttc" id="classPololu_html_a97e9fe7c507acfaedbb640e3682cec6d"><div class="ttname"><a href="classPololu.html#a97e9fe7c507acfaedbb640e3682cec6d">Pololu::~Pololu</a></div><div class="ttdeci">~Pololu()</div><div class="ttdoc">Destructor. Closes the serial communicaton channel. </div><div class="ttdef"><b>Definition:</b> <a href="Pololu_8cpp_source.html#l00035">Pololu.cpp:35</a></div></div>
<div class="ttc" id="classPololu_html_ae365c943d44a08ce45fccafa4f91781a"><div class="ttname"><a href="classPololu.html#ae365c943d44a08ce45fccafa4f91781a">Pololu::getErrors</a></div><div class="ttdeci">unsigned short getErrors()</div><div class="ttdoc">Reads and returns all currently detected error codes. </div><div class="ttdef"><b>Definition:</b> <a href="Pololu_8cpp_source.html#l00270">Pololu.cpp:270</a></div></div>
<div class="ttc" id="classSerialComLINUX_html_aeef058fc40479698cdf94efadb9ca457"><div class="ttname"><a href="classSerialComLINUX.html#aeef058fc40479698cdf94efadb9ca457">SerialComLINUX::closeSerialCom</a></div><div class="ttdeci">bool closeSerialCom()</div><div class="ttdoc">Closes a serial connection. If an error occurs an exception (IException) is thrown. </div><div class="ttdef"><b>Definition:</b> <a href="SerialCom_8cpp_source.html#l00275">SerialCom.cpp:275</a></div></div>
<div class="ttc" id="Pololu_8hpp_html"><div class="ttname"><a href="Pololu_8hpp.html">Pololu.hpp</a></div></div>
<div class="ttc" id="classPololu_html_a9df8efb22b92bbff7b01dd539930c207"><div class="ttname"><a href="classPololu.html#a9df8efb22b92bbff7b01dd539930c207">Pololu::initConnection</a></div><div class="ttdeci">void initConnection(const char *portName, unsigned short baudRate)</div><div class="ttdoc">Used to change the connection data. If the communication channel is open then the channel is closed f...</div><div class="ttdef"><b>Definition:</b> <a href="Pololu_8cpp_source.html#l00079">Pololu.cpp:79</a></div></div>
<div class="ttc" id="classPololu_html_aecab2bbf1b8154480e3ee890ab7c158c"><div class="ttname"><a href="classPololu.html#aecab2bbf1b8154480e3ee890ab7c158c">Pololu::Pololu</a></div><div class="ttdeci">Pololu()</div><div class="ttdef"><b>Definition:</b> <a href="Pololu_8cpp_source.html#l00013">Pololu.cpp:13</a></div></div>
<div class="ttc" id="classPololu_html_aeb681b4f2f39a1bf9e2df0155d9f44db"><div class="ttname"><a href="classPololu.html#aeb681b4f2f39a1bf9e2df0155d9f44db">Pololu::isComPortOpen_</a></div><div class="ttdeci">bool isComPortOpen_</div><div class="ttdef"><b>Definition:</b> <a href="Pololu_8hpp_source.html#l00132">Pololu.hpp:132</a></div></div>
<div class="ttc" id="classPololu_html_a508ff1ad49e25731a80048197568723b"><div class="ttname"><a href="classPololu.html#a508ff1ad49e25731a80048197568723b">Pololu::getMovingState</a></div><div class="ttdeci">bool getMovingState()</div><div class="ttdoc">Returns the moving state of all motors the control board is connected with. If an error occurs an exc...</div><div class="ttdef"><b>Definition:</b> <a href="Pololu_8cpp_source.html#l00235">Pololu.cpp:235</a></div></div>
<div class="ttc" id="classSerialComLINUX_html_aeb8710a98c8c7910d1751d509c9074b2"><div class="ttname"><a href="classSerialComLINUX.html#aeb8710a98c8c7910d1751d509c9074b2">SerialComLINUX::writeSerialCom</a></div><div class="ttdeci">bool writeSerialCom(unsigned char command[], unsigned short sizeCommand, unsigned char *response, unsigned short sizeResponse)</div><div class="ttdoc">This method is used to write commands to and read response from the controller via the open serial co...</div><div class="ttdef"><b>Definition:</b> <a href="SerialCom_8cpp_source.html#l00289">SerialCom.cpp:289</a></div></div>
<div class="ttc" id="classIException_html_a41d25da6a3bafe606951879e85e793a0"><div class="ttname"><a href="classIException.html#a41d25da6a3bafe606951879e85e793a0">IException::getMsg</a></div><div class="ttdeci">virtual string getMsg()=0</div></div>
<div class="ttc" id="classExceptionSerialCom_html"><div class="ttname"><a href="classExceptionSerialCom.html">ExceptionSerialCom</a></div><div class="ttdoc">Exception class for class SerialCom. </div><div class="ttdef"><b>Definition:</b> <a href="SerialCom_8hpp_source.html#l00174">SerialCom.hpp:174</a></div></div>
<div class="ttc" id="classSerialComLINUX_html_a5e1293331b119354ddac6f1c6e104252"><div class="ttname"><a href="classSerialComLINUX.html#a5e1293331b119354ddac6f1c6e104252">SerialComLINUX::openSerialCom</a></div><div class="ttdeci">bool openSerialCom()</div><div class="ttdoc">Opens the serial com defined by the initSerialCom(...) method or the constructor parameter. If the port can be successfully be opened the method retuns true. If an error occurs an exception (IException) is thrown. If the serial com is already open an exception (IException) is thrown. </div><div class="ttdef"><b>Definition:</b> <a href="SerialCom_8cpp_source.html#l00215">SerialCom.cpp:215</a></div></div>
<div class="ttc" id="classExceptionPololu_html"><div class="ttname"><a href="classExceptionPololu.html">ExceptionPololu</a></div><div class="ttdef"><b>Definition:</b> <a href="Pololu_8hpp_source.html#l00208">Pololu.hpp:208</a></div></div>
<div class="ttc" id="classSerialComLINUX_html_a3969e919017724bf151ca433a9c4c52c"><div class="ttname"><a href="classSerialComLINUX.html#a3969e919017724bf151ca433a9c4c52c">SerialComLINUX::initSerialCom</a></div><div class="ttdeci">void initSerialCom(const char *portName=&quot;/dev/ttyACM0&quot;, unsigned short baudRate=9600)</div><div class="ttdoc">Used to initiate the SerialCom object with port name and baud rate. The function puts the object in t...</div><div class="ttdef"><b>Definition:</b> <a href="SerialCom_8cpp_source.html#l00185">SerialCom.cpp:185</a></div></div>
<div class="ttc" id="classPololu_html_a7cce7354fa89281c29c5c3a453207243"><div class="ttname"><a href="classPololu.html#a7cce7354fa89281c29c5c3a453207243">Pololu::serialCom_</a></div><div class="ttdeci">SerialCom * serialCom_</div><div class="ttdef"><b>Definition:</b> <a href="Pololu_8hpp_source.html#l00131">Pololu.hpp:131</a></div></div>
<div class="ttc" id="SerialCom_8hpp_html"><div class="ttname"><a href="SerialCom_8hpp.html">SerialCom.hpp</a></div></div>
<div class="ttc" id="classPololu_html_a51a9914e19918b4c43c9ec58da59147c"><div class="ttname"><a href="classPololu.html#a51a9914e19918b4c43c9ec58da59147c">Pololu::getPosition</a></div><div class="ttdeci">unsigned short getPosition(unsigned short servo)</div><div class="ttdoc">Delivers the position value the specified motor is target at. If an error occurs an exception is thro...</div><div class="ttdef"><b>Definition:</b> <a href="Pololu_8cpp_source.html#l00198">Pololu.cpp:198</a></div></div>
<div class="ttc" id="classPololu_html_ad002d2eada218f15cdf72b3428097cb2"><div class="ttname"><a href="classPololu.html#ad002d2eada218f15cdf72b3428097cb2">Pololu::openConnection</a></div><div class="ttdeci">void openConnection()</div><div class="ttdoc">Opens the serial connection with the currently specified parameter (see method initConnection(...)). </div><div class="ttdef"><b>Definition:</b> <a href="Pololu_8cpp_source.html#l00044">Pololu.cpp:44</a></div></div>
<div class="ttc" id="classSerialCom_html"><div class="ttname"><a href="classSerialCom.html">SerialCom</a></div><div class="ttdoc">Interface for a serial connection via serial port. The implementation of this communication requires ...</div><div class="ttdef"><b>Definition:</b> <a href="SerialCom_8hpp_source.html#l00135">SerialCom.hpp:135</a></div></div>
<div class="ttc" id="classPololu_html_af7993f6d66786503c017682730a0e3dd"><div class="ttname"><a href="classPololu.html#af7993f6d66786503c017682730a0e3dd">Pololu::setAcceleration</a></div><div class="ttdeci">bool setAcceleration(unsigned short servo, unsigned short goToAcceleration)</div><div class="ttdoc">Sets the maximal acceleration of the specified servo motor. If an error occurs an exception is thrown...</div><div class="ttdef"><b>Definition:</b> <a href="Pololu_8cpp_source.html#l00164">Pololu.cpp:164</a></div></div>
<div class="ttc" id="classPololu_html_aa990539f5c36628ea0dde3b5c0618128"><div class="ttname"><a href="classPololu.html#aa990539f5c36628ea0dde3b5c0618128">Pololu::setSpeed</a></div><div class="ttdeci">bool setSpeed(unsigned short servo, unsigned short goToSpeed)</div><div class="ttdoc">Sets the maximal speed of the specified servo motor. If an error occurs an exception is thrown...</div><div class="ttdef"><b>Definition:</b> <a href="Pololu_8cpp_source.html#l00130">Pololu.cpp:130</a></div></div>
<div class="ttc" id="classIException_html"><div class="ttname"><a href="classIException.html">IException</a></div><div class="ttdoc">Interface for exceptions to be overwritten by the derived classes. </div><div class="ttdef"><b>Definition:</b> <a href="SerialCom_8hpp_source.html#l00154">SerialCom.hpp:154</a></div></div>
<div class="ttc" id="classPololu_html_a20893d84c4fdc562cbb83a18785e7c4a"><div class="ttname"><a href="classPololu.html#a20893d84c4fdc562cbb83a18785e7c4a">Pololu::closeConnection</a></div><div class="ttdeci">void closeConnection()</div><div class="ttdoc">Closes the serial connection. </div><div class="ttdef"><b>Definition:</b> <a href="Pololu_8cpp_source.html#l00062">Pololu.cpp:62</a></div></div>
<div class="ttc" id="classPololu_html_a1f24fec8da27e5e0e40fb24b88e70858"><div class="ttname"><a href="classPololu.html#a1f24fec8da27e5e0e40fb24b88e70858">Pololu::setPosition</a></div><div class="ttdeci">unsigned short setPosition(unsigned short servo, unsigned short goToPosition)</div><div class="ttdoc">Moves motor to the specified position. If an error occurs an exception is thrown. ...</div><div class="ttdef"><b>Definition:</b> <a href="Pololu_8cpp_source.html#l00096">Pololu.cpp:96</a></div></div>
</div><!-- fragment --></div><!-- contents -->

<br clear="all" />
<hr size="1"><div style="align: right;">
<a href="http://wiki.ros.org/remote_robotics">remote_robotics</a><br />
Author(s): </br />
<small>autogenerated on Sun Apr 28 2024 16:04:02</small>
</div>
</body>
</html>
